# HTTPRoute defines HTTP traffic routing rules
# This is the core resource for defining how requests are routed
apiVersion: gateway.networking.k8s.io/v1
kind: HTTPRoute
metadata:
  name: product-service-route  # HTTPRoute name
spec:
  # parentRefs specifies which Gateway this route attaches to
  parentRefs:
    - name: eg  # References the Gateway named 'eg'
  # hostnames specifies which Host header values match this route
  hostnames:
    - "www.example.com"  # Route matches requests with this hostname
  # rules define how to route matched requests
  rules:
    # backendRefs specify where to send traffic
    - backendRefs:
        - group: ""  # Core API group (empty for core resources)
          kind: Service  # Route to a Kubernetes Service
          name: product-service  # Service name
          port: 3000  # Service port
          weight: 1  # Traffic weight (used in traffic splitting)
      # matches define which requests this rule applies to
      matches:
        - path:
            type: PathPrefix  # Match path prefix
            value: /  # Match all paths starting with /
